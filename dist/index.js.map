{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import './style/index.scss'\nimport { TModalOptions } from './model/modal'\n\nclass SModals {\n    selector: string\n    options?: TModalOptions\n    private modalWrapperClass: string = \"modal-wrapper\";\n    private renderTimeoutSpeed: number = 200;\n\n    constructor(selector: string, options?: TModalOptions) {\n        this.selector = selector;\n        this.options = options;\n        this.renderTimeoutSpeed = options?.renderTimeoutSpeed || this.renderTimeoutSpeed;\n        this.bindHtmlModals()\n        this.initRenderListeners()\n    }\n\n    private initRenderListeners() {\n        const actionItems = document.querySelectorAll(this.selector)\n        actionItems.forEach((actionElement) => {\n            const openBtn = actionElement.querySelector('.open-modal-btn')\n            openBtn\n                ? openBtn.addEventListener('click', () =>\n                      this.renderModal(actionElement as HTMLElement)\n                  )\n                : actionElement.addEventListener('click', () =>\n                      this.renderModal(actionElement as HTMLElement)\n                  )\n        })\n        document.addEventListener('click', (event) => {\n            if (event.target instanceof Element) {\n                const { target } = event\n                const { classList: targetClasses } = target\n                if (\n                    targetClasses.contains('modal-button-close') ||\n                    targetClasses.contains('modal-backdrop')\n                ) {\n                    this.unMountModal()\n                }\n            }\n        })\n    }\n\n    private renderModal(contentElement: HTMLElement) {\n        const title =\n            contentElement.dataset.modalTitle || this.options?.modalTitle;\n        const header = title ? `<h2 class=\"modal-header\">${title}</h2>` : ''\n        const imgContent = Array.from(\n            contentElement.querySelectorAll('[data-modal-img]')\n        ).reduce((prev, cur) => {\n            return (prev += `\n            <div class='img-wrap'>\n                <img src=\"${cur.getAttribute('src')}\" alt=\"${cur.getAttribute(\n                'alt'\n            )}\">\n            </div>`)\n        }, ``)\n        const textContent = Array.from(\n            contentElement.querySelectorAll('[data-modal-text]')\n        ).reduce((prev, cur) => {\n            return (prev += `<p>${cur.textContent}</p>`)\n        }, ``)\n\n        const template = `\n            <div class=\"${this.modalWrapperClass}\">\n                <div class=\"modal-backdrop\"></div>\n                <div class=\"modal-container\">\n                    ${header}\n                    <div class=\"modal-body\">\n                        ${imgContent}\n                        ${textContent}\n                    </div>\n                    <div class=\"modal-actions\">\n                        <button class=\"modal-button-close\">${\n                            this.options?.btnCloseText || 'Close'\n                        }</button>\n                    </div>\n                </div>\n            </div> \n        `\n        document.body.insertAdjacentHTML('beforeend', template);\n\n        this.animateModal();\n    }\n\n    private unMountModal() {\n        this.unMountAnimate();\n\n        setTimeout(() => {\n            document.querySelector('.modal-wrapper')?.remove();\n        }, this.renderTimeoutSpeed)\n    }\n\n    private unMountAnimate() {\n        const modalWrapper = document.querySelector(`.${this.modalWrapperClass}`);\n        modalWrapper?.classList.remove('active');\n    }\n\n    private animateModal() {\n        const modalWrapper = document.querySelector(`.${this.modalWrapperClass}`);\n        setTimeout(() => {\n            modalWrapper?.classList.add('active');\n        })\n    }\n\n    private bindHtmlModals() {\n        const dataModalsIds = Array.from(document.querySelectorAll('[data-modal-id]'))\n        const htmlModals = dataModalsIds.filter((el) => el.tagName !== 'BUTTON');\n        htmlModals.forEach((el) => el.classList.add('hidden-content'))\n\n        document.addEventListener('click', (event) => {\n            const target = event.target;\n            if((target as HTMLButtonElement).tagName === 'BUTTON') {\n                const datasetValue = (target as HTMLButtonElement).dataset.modalId\n                const htmlModal = document.querySelector(`[data-modal-id=${datasetValue}]`) as HTMLElement;\n                const template = `\n                    <div class=\"${this.modalWrapperClass}\">\n                        <div class=\"modal-backdrop\"></div>\n                        <div class=\"modal-container\">\n                            ${htmlModal.innerHTML}\n                        </div>\n                    </div> \n                `;\n                document.body.insertAdjacentHTML('beforeend', template);\n                this.animateModal();\n            }\n        })\n    }\n}\n\nwindow.SModals = SModals;"],"names":[],"mappings":"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"}