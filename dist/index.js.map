{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import './style/index.scss'\nimport { TModalOptions } from './model/modal'\n\nclass SModals {\n    selector: string | undefined\n    options?: TModalOptions\n    private modalWrapperClass: string = 'modal-wrapper'\n    private renderTimeoutSpeed: number = 200\n\n    constructor(selector?: string, options?: TModalOptions) {\n        this.selector = selector\n        this.options = options\n        this.renderTimeoutSpeed =\n            options?.renderTimeoutSpeed || this.renderTimeoutSpeed\n        this.bindHtmlModals()\n        if(this.selector) {\n            this.initCardOpenersListeners()\n        }\n        this.initCloseEventListeners();\n    }\n\n    private initCardOpenersListeners() {\n        if(!this.selector) {\n            throw new Error('Provide class name into constructor. Example: new SModals(\".card\")')\n        }\n        const actionItems = document.querySelectorAll(this.selector)\n        actionItems.forEach((actionElement) => {\n            const openBtn = actionElement.querySelector('.open-modal-btn')\n            openBtn\n                ? openBtn.addEventListener('click', () =>\n                      this.renderModal(actionElement as HTMLElement)\n                  )\n                : actionElement.addEventListener('click', () =>\n                      this.renderModal(actionElement as HTMLElement)\n                  )\n        })\n    }\n\n    private initCloseEventListeners() {\n        document.addEventListener('click', (event) => {\n            if (event.target instanceof Element) {\n                const { target } = event\n                const { classList: targetClasses } = target\n                if (\n                    targetClasses.contains('modal-button-close') ||\n                    targetClasses.contains('modal-backdrop')\n                ) {\n                    this.unMountModal()\n                }\n            }\n        })\n    }\n\n    private renderModal(contentElement: HTMLElement) {\n        const title =\n            contentElement.dataset.modalTitle || this.options?.modalTitle\n        const header = title ? `<h2 class=\"modal-header\">${title}</h2>` : ''\n        const imgContent = Array.from(\n            contentElement.querySelectorAll('[data-modal-img]')\n        ).reduce((prev, cur) => {\n            return (prev += `\n            <div class='img-wrap'>\n                <img src=\"${cur.getAttribute('src')}\" alt=\"${cur.getAttribute(\n                'alt'\n            )}\">\n            </div>`)\n        }, ``)\n        const textContent = Array.from(\n            contentElement.querySelectorAll('[data-modal-text]')\n        ).reduce((prev, cur) => {\n            return (prev += `<p>${cur.textContent}</p>`)\n        }, ``)\n\n        const template = `\n            <div class=\"${this.modalWrapperClass}\">\n                <div class=\"modal-backdrop\"></div>\n                <div class=\"modal-container\">\n                    ${header}\n                    <div class=\"modal-body\">\n                        ${imgContent}\n                        ${textContent}\n                    </div>\n                    <div class=\"modal-actions\">\n                        <button class=\"modal-button-close\">${\n                            this.options?.btnCloseText || 'Close'\n                        }</button>\n                    </div>\n                </div>\n            </div> \n        `\n        document.body.insertAdjacentHTML('beforeend', template)\n\n        this.animateModal()\n    }\n\n    private unMountModal() {\n        this.unMountAnimate()\n\n        setTimeout(() => {\n            document.querySelector('.modal-wrapper')?.remove()\n        }, this.renderTimeoutSpeed)\n    }\n\n    private unMountAnimate() {\n        const modalWrapper = document.querySelector(\n            `.${this.modalWrapperClass}`\n        )\n        modalWrapper?.classList.remove('active')\n    }\n\n    private animateModal() {\n        const modalWrapper = document.querySelector(\n            `.${this.modalWrapperClass}`\n        )\n        setTimeout(() => {\n            modalWrapper?.classList.add('active')\n        })\n    }\n\n    private bindHtmlModals() {\n        const dataModalsIds = Array.from(\n            document.querySelectorAll('[data-modal-id]')\n        )\n        const htmlModals = dataModalsIds.filter((el) => el.tagName !== 'BUTTON')\n        htmlModals.forEach((el) => el.classList.add('hidden-content'))\n\n        document.addEventListener('click', (event) => {\n            const target = event.target\n            if ((target as HTMLButtonElement).tagName === 'BUTTON') {\n                const datasetValue = (target as HTMLButtonElement).dataset\n                    .modalId;\n                if(!datasetValue) return;\n                const htmlModal = document.querySelector(\n                    `[data-modal-id=${datasetValue}]`\n                ) as HTMLElement\n                const template = `\n                    <div class=\"${this.modalWrapperClass}\">\n                        <div class=\"modal-backdrop\"></div>\n                        <div class=\"modal-container\">\n                            ${htmlModal.innerHTML}\n                        </div>\n                    </div> \n                `\n                document.body.insertAdjacentHTML('beforeend', template)\n                this.animateModal()\n            }\n        })\n    }\n}\n\nwindow.SModals = SModals\n"],"names":[],"mappings":"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"}